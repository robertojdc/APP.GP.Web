@model APP.GP.Web.Model.Actor

@{
    ViewData["Title"] = "Editar Actor Político";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="container-fluid py-4">
    <div class="card shadow-sm mb-4">
        <div class="card-header text-white text-center">
            <h3 class="mb-0">EDITAR ACTOR</h3>
        </div>
        <div class="card-body bg-light">
            <form asp-action="Edit" enctype="multipart/form-data" class="row g-3">
                <div class="col-12 col-md-4 text-center">
                    <img src="data:image/png;base64,@Model.FotoBase64" class="img-thumbnail mb-3" width="200" alt="Foto del actor político" />
                    <input type="file" name="Foto" class="form-control" />
                </div>

                <!-- Fila para los campos del formulario -->
                <div class="col-12 col-md-8">
                    <div class="row">
                        <div class="col-12 col-md-6">
                            <label asp-for="Nombre" class="form-label">Nombre(s)</label>
                            <input asp-for="Nombre" class="form-control" placeholder="Ingrese el nombre" />
                            <span asp-validation-for="Nombre" class="text-danger"></span>
                        </div>
                        <div class="col-12 col-md-6">
                            <label asp-for="ApellidoPaterno" class="form-label">Apellido Paterno</label>
                            <input asp-for="ApellidoPaterno" class="form-control" placeholder="Ingrese el apellido paterno" />
                            <span asp-validation-for="ApellidoPaterno" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Otros campos en filas separadas -->
                    <div class="row">
                        <div class="col-12 col-md-6">
                            <label asp-for="ApellidoMaterno" class="form-label">Apellido Materno</label>
                            <input asp-for="ApellidoMaterno" class="form-control" placeholder="Ingrese el apellido materno" />
                            <span asp-validation-for="ApellidoMaterno" class="text-danger"></span>
                        </div>
                        <div class="col-12 col-md-6">
                            <label asp-for="CargoActual" class="form-label">Cargo Actual</label>
                            <input asp-for="CargoActual" class="form-control" placeholder="Ingrese el cargo actual" />
                            <span asp-validation-for="CargoActual" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 col-md-6">
                            <label asp-for="FechaNacimiento" class="form-label">Fecha de Nacimiento</label>
                            <input asp-for="FechaNacimiento" type="date" class="form-control" />
                            <span asp-validation-for="FechaNacimiento" class="text-danger"></span>
                        </div>
                        <div class="col-12 col-md-6">
                            <label asp-for="DomicilioLaboral" class="form-label">Domicilio Laboral</label>
                            <input asp-for="DomicilioLaboral" class="form-control" placeholder="Ingrese domicilio laboral" />
                            <span asp-validation-for="DomicilioLaboral" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <!-- Continúa con los demás campos en nuevas filas -->
                <div class="col-12 col-md-6">
                    <label asp-for="TelefonoLaboral" class="form-label">Teléfono Laboral</label>
                    <input asp-for="TelefonoLaboral" type="tel" class="form-control" placeholder="Ingrese teléfono laboral" />
                    <span asp-validation-for="TelefonoLaboral" class="text-danger"></span>
                </div>
                <div class="col-12 col-md-6">
                    <label asp-for="TelefonoPersonal" class="form-label">Teléfono Personal</label>
                    <input asp-for="TelefonoPersonal" type="tel" class="form-control" placeholder="Ingrese teléfono personal" />
                    <span asp-validation-for="TelefonoPersonal" class="text-danger"></span>
                </div>
                <div class="col-12 col-md-6">
                    <label asp-for="CorreoElectronico" class="form-label">Correo Electrónico</label>
                    <input asp-for="CorreoElectronico" type="email" class="form-control" placeholder="Ingrese correo electrónico" />
                    <span asp-validation-for="CorreoElectronico" class="text-danger"></span>
                </div>
                <div class="col-12 col-md-6">
                    <label asp-for="inputRedSocial" class="form-label">Redes Sociales</label>
                    <input asp-for="inputRedSocial" class="form-control" placeholder="Ingrese red social" />
                    <span asp-validation-for="inputRedSocial" class="text-danger"></span>
                </div>
                <div class="col-12 col-md-6">
                    <label asp-for="PaginaWeb" class="form-label">Página Web</label>
                    <input asp-for="PaginaWeb" type="url" class="form-control" placeholder="Ingrese página web" />
                    <span asp-validation-for="PaginaWeb" class="text-danger"></span>
                </div>
                <div class="col-12 col-md-6">
                    <label asp-for="Afinidad" class="form-label">Afinidad</label>
                    <select asp-for="Afinidad" asp-items="@ViewBag.Afinidades" class="form-control">
                        <option value="">Seleccione una opción</option>
                    </select>
                    <span asp-validation-for="Afinidad" class="text-danger"></span>
                </div>
                <div class="col-12 col-md-6">
                    <label asp-for="Compromiso" class="form-label">Compromiso</label>
                    <input asp-for="Compromiso" class="form-control" placeholder="Ingrese compromiso" />
                    <span asp-validation-for="Compromiso" class="text-danger"></span>
                </div>
                <div class="col-12">
                    <label asp-for="Comentarios" class="form-label">Comentarios</label>
                    <textarea asp-for="Comentarios" class="form-control" placeholder="Ingrese comentarios"></textarea>
                    <span asp-validation-for="Comentarios" class="text-danger"></span>
                </div>

                <!-- Botones de acción -->
                <div class="col-12 text-center mt-4">
                    <button type="button" id="btnGuardar" class="btn btn-primary">Guardar</button>
                    <a asp-action="Index" class="btn btn-outline-secondary">Regresar</a>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        $('#btnGuardar').on('click', function () {
            // Crear el objeto FormData
            var formData = new FormData();

            // Agregar los campos del formulario al FormData
            formData.append("IdActor", "@Model.IdActor");
            formData.append("Nombre", $('#Nombre').val());
            formData.append("ApellidoPaterno", $('#ApellidoPaterno').val());
            formData.append("ApellidoMaterno", $('#ApellidoMaterno').val());
            formData.append("CargoActual", $('#CargoActual').val());
            formData.append("FechaNacimiento", $('#FechaNacimiento').val());
            formData.append("DomicilioLaboral", $('#DomicilioLaboral').val());
            formData.append("DomicilioParticular", $('#DomicilioParticular').val());
            formData.append("TelefonoLaboral", $('#TelefonoLaboral').val());
            formData.append("TelefonoPersonal", $('#TelefonoPersonal').val());
            formData.append("CorreoElectronico", $('#CorreoElectronico').val());
            formData.append("inputRedSocial", $('#inputRedSocial').val());
            formData.append("PaginaWeb", $('#PaginaWeb').val());
            formData.append("Afinidad", $('#Afinidad').val());
            formData.append("Compromiso", $('#Compromiso').val());
            formData.append("Comentarios", $('#Comentarios').val());

            // Agregar la foto seleccionada al FormData
            var fileInput = $('input[name="Foto"]')[0];
            if (fileInput.files.length > 0) {
                formData.append("Foto", fileInput.files[0]);
            }

            // Realizar la solicitud AJAX para enviar los datos
            $.ajax({
                url: '@Url.Action("Edit", "Actor")', // URL de la acción del controlador
                type: 'POST',
                data: formData,
                processData: false,  // No procesar los datos
                contentType: false,  // No establecer el tipo de contenido
                success: function (response) {
                    // Maneja la respuesta en caso de éxito
                    MensajeExito('Éxito', 'El actor ha sido actualizado correctamente.');
                    // Delay para redirigir a index
                    setTimeout(function () {
                        window.location.href = '@Url.Action("Select", "Actor")';
                    }, 2500);
                },
                error: function (xhr, status, error) {
                    // Maneja el error en caso de fallo
                    alert("Ocurrió un error al guardar los datos.");
                }
            });
        });

    });
</script>


<style>
    /* Colores basados en los Pantones proporcionados */
    :root {
        --color-primary: #9F2241; /* Pantone 7420 C */
        --color-secondary: #235B4E; /* Pantone 626 C */
        --color-accent: #DDC9A3; /* Pantone 468 C */
        --color-gray: #98989A; /* Pantone Cool Gray 7 C */
        --color-background: #F5F5F5; /* Fondo neutro para claridad */
    }

    body {
        background-color: var(--color-background);
    }

    .card-header {
        background-color: var(--color-primary);
        border-bottom: 2px solid var(--color-secondary);
    }

    .btn-danger {
        background-color: var(--color-primary);
        border-color: var(--color-primary);
        color: white;
    }

        .btn-danger:hover {
            background-color: #691C32; /* Un tono más oscuro para el hover */
            border-color: #691C32;
        }

    .btn-outline-secondary {
        border-color: var(--color-secondary);
        color: var(--color-secondary);
    }

        .btn-outline-secondary:hover {
            background-color: var(--color-secondary);
            color: white;
        }

    .table thead {
        background-color: var(--color-secondary);
        color: white;
    }

    .table tbody tr:hover {
        background-color: var(--color-accent);
    }

    .form-label {
        color: var(--color-secondary);
    }

    .form-control:focus {
        border-color: var(--color-secondary);
        box-shadow: 0 0 0 0.2rem rgba(35, 91, 78, 0.25); /* Pantone 626 C */
    }
</style>